<div class="row">
	<div class="col-md-6">
		<div id='calendar'></div>
	</div>
	<div class="col-md-6">
		<button type="button" class="btn btn-warning btn-lg btn-block">Warning</button>
	</div>
</div>
<%= render 'modal' %>

<script>
	$(document).ready(function() {
	// page is now ready, initialize the calendar...
		$('#calendar').fullCalendar({
		  events: '<%= events_path %>',

			eventClick: function(event) {
				$.ajax({
					url: '/events/' + event.id + '/edit',
					type: 'GET',
					dataType: 'script'
				})
				.done(function() {
					console.log("success");
				})
				.fail(function() {
					console.log("error");
				})
				.always(function() {
					console.log("complete");
				});

    	},

		  eventDrop: function( event, delta, revertFunc, jsEvent, ui, view ){
		  	console.log(event.start.format());
				$.ajax({
					url: '/events/' + event.id,
					type: 'PATCH',
					dataType: 'script',
					data: {
						event: {start: event.start.format(), end: event.start.format()},
						authenticity_token: "<%= form_authenticity_token %>"
					}
				})
				.done(function() {
					console.log("success");
				})
				.fail(function() {
					console.log("error");
				})
				.always(function() {
					console.log("complete");
				});
			 }
      });
	});
</script>
